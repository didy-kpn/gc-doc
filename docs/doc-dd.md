# AI-DLC + Document Driven Development

## 概要

このワークフローは AI-DLC（AI主導型開発ライフサイクル） をベースに、

* ステークホルダードキュメント群（非技術者向けの全体像・使い方）
* 仕様書（要件定義書）（ユーザー・ビジネス視点の要件整理）
* 技術設計書（開発者視点の実装計画）
* 実装タスクリスト（TODO.md）（実務作業へのブリッジ）
* コード＋テスト

を「双方向に同期」させる仕組みです。
Gemini CLI をオーケストレーターとして、差分検知と相互フィードバックを自動化する点が特徴です。

## 特徴

1. 一貫性の確保: ドキュメント ⇄ 仕様 ⇄ 設計 ⇄ 実装 ⇄ テスト が常に同期されるため、「ドキュメントが古い」「仕様とコードが乖離」といった問題を減らせる。
2. ステークホルダーと開発者の橋渡し: ステークホルダー向けの資料と開発者向けの資料が分離しつつも連動するため、両者の認識ズレを早期に発見できる。
3. Git を中心にした差分管理:  すべてのアウトプットがリポジトリで管理され、差分ベースでレビューできるため透明性が高い。
4. AI による反復的ブラッシュアップ: ドキュメントや仕様変更を AI が即座に検知して提案するので、スピード感を持ちながら品質維持ができる。
5. 新規・既存両対応: 新規プロジェクトではゼロから設計を積み上げられ、既存プロジェクトではドキュメントや仕様を後追いで整備しながら開発に進められる。

##  Gemini CLI を活用した AI-DLC ワークフロー（新規・既存対応）

### 1. ドキュメント作成／修正（Stakeholder Docs）

入力：システム概要、目的、利用方法、機能一覧、API説明、画面仕様、構成図、技術スタックなど。
出力：ステークホルダードキュメント群（git差分で確認可能、修正時も全体出力）。
Gemini CLI の活用：gemini docgen のようなカスタム slash コマンドで、ドキュメントの雛形生成や既存ドキュメントの差分レビュー。Git の差分をもとに、AI が「更新候補」を提示 → 人間が承認／修正。


### 2. 仕様書生成／ブラッシュアップ（Requirements Spec）

入力：ドキュメントの差分。
出力：ユーザーやビジネスステークホルダー目線の仕様書（要件定義書）。
Gemini CLI の活用：gemini specgen --from-doc docs/ で、ドキュメントから要件定義書を生成。差分を検出し「ドキュメントと仕様に齟齬があります」と警告 → 自動で相互フィードバック。


### 3. 実装計画作成（Technical Design Docs）

入力：仕様書最新版。
出力：技術設計書（SQL定義、データモデル、ドメインモデル、API仕様、ビルド方法、契約設計など）。
Gemini CLI の活用：gemini plan --from-spec spec.yaml でタスクリストに変換可能な設計書を生成。ドキュメント・仕様書・技術設計書に不整合があれば、自動で相互フィードバック。


### 4. タスク分解（Task Breakdown）

入力：技術設計書。
出力：実装タスクリスト（マークダウンファイルのTODOリスト）。
Gemini CLI の活用：gemini tasks --from-plan plan.md --output tasks.md。GitHub Actions と連携し、自動で PR や Issue を作成。


### 5. 実装（型駆動＋テスト駆動）

入力：タスクのID。
プロセス：各タスクを TDD（テスト駆動）や型駆動（Type-First）で実装。AI が「型定義→テストスケルトン→実装本体」の順に支援。
Gemini CLI の活用：gemini dev task-123 → 該当タスクのテストファイルと型ファイルを自動生成。差分レビュー（AI が「未実装テスト」「型と不一致」を検知）。ドキュメント・仕様書・技術設計書・実装に不整合があれば、自動で相互フィードバック。


### 6. 実装とドキュメントの同期（Merge / PR）

入力：実装済みコード、更新された設計情報。
出力：GitHub PR によるマージ。ドキュメント自動更新。
Gemini CLI の活用：gemini sync → 実装内容の差分からドキュメントを自動更新。GitHub Actions で PR 作成時に「ドキュメント・仕様・コードの同期性チェック」を自動実行。


## ワークフロー図（簡略）

[ステークホルダードキュメント群] 
       ↔ [仕様書（要件定義書）] 
       ↔ [技術設計書] 
       ↔ [実装タスクリスト (TODO.md)] 
       ↔ [コード+テスト]
   ↑                                         ↓
   └─────────── Gemini CLI による差分同期 ────────────┘
